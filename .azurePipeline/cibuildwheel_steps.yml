parameters:
  pythonVersion: '3.7'

steps:
- task: UsePythonVersion@0
  inputs:
    versionSpec: ${{ parameters.pythonVersion }}
- bash: |
    # Use this fork of cibuildwheel for macos c++11 support
    # https://github.com/joerick/cibuildwheel/pull/156
    python -m pip install git+https://github.com/Czaki/cibuildwheel
    cibuildwheel --output-dir wheelhouse .
- bash: |
    ls
- task: PublishPipelineArtifact@1
  inputs: {targetPath: 'wheelhouse'}
